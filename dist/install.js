require("net");var e=require("tls"),t=require("http"),r=require("https"),o=require("events"),n=require("assert"),s=require("util"),i=require("os"),a=require("child_process"),c=require("path"),l=require("timers"),u=require("fs"),d=require("string_decoder");function p(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},f={},m={},g=h.parcelRequire1f15;null==g&&((g=function(e){if(e in f)return f[e].exports;if(e in m){var t=m[e];delete m[e];var r={id:e,exports:{}};return f[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){m[e]=t},h.parcelRequire1f15=g),g.register("jtjry",(function(e,t){e.exports=g("6EVZe")})),g.register("6EVZe",(function(n,i){var a,c,l,u,d,h;function f(e){var r=this;r.options=e||{},r.proxyOptions=r.options.proxy||{},r.maxSockets=r.options.maxSockets||t.Agent.defaultMaxSockets,r.requests=[],r.sockets=[],r.on("free",(function(e,t,o,n){for(var s=g(t,o,n),i=0,a=r.requests.length;i<a;++i){var c=r.requests[i];if(c.host===s.host&&c.port===s.port)return r.requests.splice(i,1),void c.request.onSocket(e)}e.destroy(),r.removeSocket(e)}))}function m(t,r){var o=this;f.prototype.createSocket.call(o,t,(function(n){var s=t.request.getHeader("host"),i=v({},o.options,{socket:n,servername:s?s.replace(/:.*$/,""):t.host}),a=e.connect(0,i);o.sockets[o.sockets.indexOf(n)]=a,r(a)}))}function g(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function v(e){for(var t=1,r=arguments.length;t<r;++t){var o=arguments[t];if("object"==typeof o)for(var n=Object.keys(o),s=0,i=n.length;s<i;++s){var a=n[s];void 0!==o[a]&&(e[a]=o[a])}}return e}p(n.exports,"httpOverHttp",(()=>a),(e=>a=e)),p(n.exports,"httpsOverHttp",(()=>c),(e=>c=e)),p(n.exports,"httpOverHttps",(()=>l),(e=>l=e)),p(n.exports,"httpsOverHttps",(()=>u),(e=>u=e)),p(n.exports,"debug",(()=>d),(e=>d=e)),a=function(e){var r=new f(e);return r.request=t.request,r},c=function(e){var r=new f(e);return r.request=t.request,r.createSocket=m,r.defaultPort=443,r},l=function(e){var t=new f(e);return t.request=r.request,t},u=function(e){var t=new f(e);return t.request=r.request,t.createSocket=m,t.defaultPort=443,t},s.inherits(f,o.EventEmitter),f.prototype.addRequest=function(e,t,r,o){var n=this,s=v({request:e},n.options,g(t,r,o));n.sockets.length>=this.maxSockets?n.requests.push(s):n.createSocket(s,(function(t){function r(){n.emit("free",t,s)}function o(e){n.removeSocket(t),t.removeListener("free",r),t.removeListener("close",o),t.removeListener("agentRemove",o)}t.on("free",r),t.on("close",o),t.on("agentRemove",o),e.onSocket(t)}))},f.prototype.createSocket=function(e,t){var r=this,o={};r.sockets.push(o);var n=v({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(n.localAddress=e.localAddress),n.proxyAuth&&(n.headers=n.headers||{},n.headers["Proxy-Authorization"]="Basic "+new Buffer(n.proxyAuth).toString("base64")),h("making CONNECT request");var s=r.request(n);function i(n,i,a){var c;return s.removeAllListeners(),i.removeAllListeners(),200!==n.statusCode?(h("tunneling socket could not be established, statusCode=%d",n.statusCode),i.destroy(),(c=new Error("tunneling socket could not be established, statusCode="+n.statusCode)).code="ECONNRESET",e.request.emit("error",c),void r.removeSocket(o)):a.length>0?(h("got illegal response body from proxy"),i.destroy(),(c=new Error("got illegal response body from proxy")).code="ECONNRESET",e.request.emit("error",c),void r.removeSocket(o)):(h("tunneling connection has established"),r.sockets[r.sockets.indexOf(o)]=i,t(i))}s.useChunkedEncodingByDefault=!1,s.once("response",(function(e){e.upgrade=!0})),s.once("upgrade",(function(e,t,r){process.nextTick((function(){i(e,t,r)}))})),s.once("connect",i),s.once("error",(function(t){s.removeAllListeners(),h("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var n=new Error("tunneling socket could not be established, cause="+t.message);n.code="ECONNRESET",e.request.emit("error",n),r.removeSocket(o)})),s.end()},f.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,(function(e){r.request.onSocket(e)}))}},h=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},d=h})),g.register("4zSgd",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&r(t,e,o);return n(t,e),t},u=e.exports&&e.exports.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.argStringToArray=e.exports.ToolRunner=void 0;const d=s(i),p=s(o),h=s(a),f=s(c),m=s(g("dIHbi")),v=s(g("8cewM")),y="win32"===process.platform;class w extends p.EventEmitter{constructor(e,t,r){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=t||[],this.options=r||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,t){const r=this._getSpawnFileName(),o=this._getSpawnArgs(e);let n=t?"":"[command]";if(y)if(this._isCmdFile()){n+=r;for(const e of o)n+=` ${e}`}else if(e.windowsVerbatimArguments){n+=`"${r}"`;for(const e of o)n+=` ${e}`}else{n+=this._windowsQuoteCmdArg(r);for(const e of o)n+=` ${this._windowsQuoteCmdArg(e)}`}else{n+=r;for(const e of o)n+=` ${e}`}return n}_processLineBuffer(e,t,r){try{let o=t+e.toString(),n=o.indexOf(d.EOL);for(;n>-1;){r(o.substring(0,n)),o=o.substring(n+d.EOL.length),n=o.indexOf(d.EOL)}return o}catch(e){return this._debug(`error processing line. Failed with error ${e}`),""}}_getSpawnFileName(){return y&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(y&&this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const r of this.args)t+=" ",t+=e.windowsVerbatimArguments?r:this._windowsQuoteCmdArg(r);return t+='"',[t]}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){const e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';const t=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let r=!1;for(const o of e)if(t.some((e=>e===o))){r=!0;break}if(!r)return e;let o='"',n=!0;for(let t=e.length;t>0;t--)o+=e[t-1],n&&"\\"===e[t-1]?o+="\\":'"'===e[t-1]?(n=!0,o+='"'):n=!1;return o+='"',o.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("\t")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let t='"',r=!0;for(let o=e.length;o>0;o--)t+=e[o-1],r&&"\\"===e[o-1]?t+="\\":'"'===e[o-1]?(r=!0,t+="\\"):r=!1;return t+='"',t.split("").reverse().join("")}_cloneExecOptions(e){const t={cwd:(e=e||{}).cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return t.outStream=e.outStream||process.stdout,t.errStream=e.errStream||process.stderr,t}_getSpawnOptions(e,t){e=e||{};const r={};return r.cwd=e.cwd,r.env=e.env,r.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(r.argv0=`"${t}"`),r}exec(){return u(this,void 0,void 0,(function*(){return!v.isRooted(this.toolPath)&&(this.toolPath.includes("/")||y&&this.toolPath.includes("\\"))&&(this.toolPath=f.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield m.which(this.toolPath,!0),new Promise(((e,t)=>u(this,void 0,void 0,(function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(const e of this.args)this._debug(`   ${e}`);const r=this._cloneExecOptions(this.options);!r.silent&&r.outStream&&r.outStream.write(this._getCommandString(r)+d.EOL);const o=new x(r,this.toolPath);if(o.on("debug",(e=>{this._debug(e)})),this.options.cwd&&!(yield v.exists(this.options.cwd)))return t(new Error(`The cwd: ${this.options.cwd} does not exist!`));const n=this._getSpawnFileName(),s=h.spawn(n,this._getSpawnArgs(r),this._getSpawnOptions(this.options,n));let i="";s.stdout&&s.stdout.on("data",(e=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(e),!r.silent&&r.outStream&&r.outStream.write(e),i=this._processLineBuffer(e,i,(e=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(e)}))}));let a="";if(s.stderr&&s.stderr.on("data",(e=>{if(o.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(e),!r.silent&&r.errStream&&r.outStream){(r.failOnStdErr?r.errStream:r.outStream).write(e)}a=this._processLineBuffer(e,a,(e=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(e)}))})),s.on("error",(e=>{o.processError=e.message,o.processExited=!0,o.processClosed=!0,o.CheckComplete()})),s.on("exit",(e=>{o.processExitCode=e,o.processExited=!0,this._debug(`Exit code ${e} received from tool '${this.toolPath}'`),o.CheckComplete()})),s.on("close",(e=>{o.processExitCode=e,o.processExited=!0,o.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),o.CheckComplete()})),o.on("done",((r,o)=>{i.length>0&&this.emit("stdline",i),a.length>0&&this.emit("errline",a),s.removeAllListeners(),r?t(r):e(o)})),this.options.input){if(!s.stdin)throw new Error("child process missing stdin");s.stdin.end(this.options.input)}}))))}))}}e.exports.ToolRunner=w,e.exports.argStringToArray=function(e){const t=[];let r=!1,o=!1,n="";function s(e){o&&'"'!==e&&(n+="\\"),n+=e,o=!1}for(let i=0;i<e.length;i++){const a=e.charAt(i);'"'!==a?"\\"===a&&o?s(a):"\\"===a&&r?o=!0:" "!==a||r?s(a):n.length>0&&(t.push(n),n=""):o?s(a):r=!r}return n.length>0&&t.push(n.trim()),t};class x extends p.EventEmitter{constructor(e,t){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!t)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=t,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=l.setTimeout(x.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):0===this.processExitCode||this.options.ignoreReturnCode?this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)):e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){const t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}}})),g.register("dIHbi",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),o=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},l=e.exports&&e.exports.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.findInPath=e.exports.which=e.exports.mkdirP=e.exports.rmRF=e.exports.mv=e.exports.cp=void 0;const u=i(a),d=i(c),p=i(g("8cewM")),h=s.promisify(u.exec),f=s.promisify(u.execFile);function m(e){return l(this,void 0,void 0,(function*(){if(p.IS_WINDOWS){if(/[*"<>|]/.test(e))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{const t=p.getCmdPath();(yield p.isDirectory(e,!0))?yield h(`${t} /s /c "rd /s /q "%inputPath%""`,{env:{inputPath:e}}):yield h(`${t} /s /c "del /f /a "%inputPath%""`,{env:{inputPath:e}})}catch(e){if("ENOENT"!==e.code)throw e}try{yield p.unlink(e)}catch(e){if("ENOENT"!==e.code)throw e}}else{let t=!1;try{t=yield p.isDirectory(e)}catch(e){if("ENOENT"!==e.code)throw e;return}t?yield f("rm",["-rf",`${e}`]):yield p.unlink(e)}}))}function v(e){return l(this,void 0,void 0,(function*(){n.ok(e,"a path argument must be provided"),yield p.mkdir(e,{recursive:!0})}))}function y(e){return l(this,void 0,void 0,(function*(){if(!e)throw new Error("parameter 'tool' is required");const t=[];if(p.IS_WINDOWS&&process.env.PATHEXT)for(const e of process.env.PATHEXT.split(d.delimiter))e&&t.push(e);if(p.isRooted(e)){const r=yield p.tryGetExecutablePath(e,t);return r?[r]:[]}if(e.includes(d.sep))return[];const r=[];if(process.env.PATH)for(const e of process.env.PATH.split(d.delimiter))e&&r.push(e);const o=[];for(const n of r){const r=yield p.tryGetExecutablePath(d.join(n,e),t);r&&o.push(r)}return o}))}function w(e,t,r,o){return l(this,void 0,void 0,(function*(){if(r>=255)return;r++,yield v(t);const n=yield p.readdir(e);for(const s of n){const n=`${e}/${s}`,i=`${t}/${s}`;(yield p.lstat(n)).isDirectory()?yield w(n,i,r,o):yield x(n,i,o)}yield p.chmod(t,(yield p.stat(e)).mode)}))}function x(e,t,r){return l(this,void 0,void 0,(function*(){if((yield p.lstat(e)).isSymbolicLink()){try{yield p.lstat(t),yield p.unlink(t)}catch(e){"EPERM"===e.code&&(yield p.chmod(t,"0666"),yield p.unlink(t))}const r=yield p.readlink(e);yield p.symlink(r,t,p.IS_WINDOWS?"junction":null)}else(yield p.exists(t))&&!r||(yield p.copyFile(e,t))}))}e.exports.cp=function(e,t,r={}){return l(this,void 0,void 0,(function*(){const{force:o,recursive:n,copySourceDirectory:s}=function(e){const t=null==e.force||e.force,r=Boolean(e.recursive),o=null==e.copySourceDirectory||Boolean(e.copySourceDirectory);return{force:t,recursive:r,copySourceDirectory:o}}(r),i=(yield p.exists(t))?yield p.stat(t):null;if(i&&i.isFile()&&!o)return;const a=i&&i.isDirectory()&&s?d.join(t,d.basename(e)):t;if(!(yield p.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield p.stat(e)).isDirectory()){if(!n)throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);yield w(e,a,0,o)}else{if(""===d.relative(e,a))throw new Error(`'${a}' and '${e}' are the same file`);yield x(e,a,o)}}))},e.exports.mv=function(e,t,r={}){return l(this,void 0,void 0,(function*(){if(yield p.exists(t)){let o=!0;if((yield p.isDirectory(t))&&(t=d.join(t,d.basename(e)),o=yield p.exists(t)),o){if(null!=r.force&&!r.force)throw new Error("Destination already exists");yield m(t)}}yield v(d.dirname(t)),yield p.rename(e,t)}))},e.exports.rmRF=m,e.exports.mkdirP=v,e.exports.which=function e(t,r){return l(this,void 0,void 0,(function*(){if(!t)throw new Error("parameter 'tool' is required");if(r){const r=yield e(t,!1);if(!r)throw p.IS_WINDOWS?new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${t}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return r}const o=yield y(t);return o&&o.length>0?o[0]:""}))},e.exports.findInPath=y})),g.register("8cewM",(function(e,t){"use strict";var r,o=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},i=e.exports&&e.exports.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getCmdPath=e.exports.tryGetExecutablePath=e.exports.isRooted=e.exports.isDirectory=e.exports.exists=e.exports.IS_WINDOWS=e.exports.unlink=e.exports.symlink=e.exports.stat=e.exports.rmdir=e.exports.rename=e.exports.readlink=e.exports.readdir=e.exports.mkdir=e.exports.lstat=e.exports.copyFile=e.exports.chmod=void 0;const a=s(u),l=s(c);function d(e){return(1&e.mode)>0||(8&e.mode)>0&&e.gid===process.getgid()||(64&e.mode)>0&&e.uid===process.getuid()}r=a.promises,e.exports.chmod=r.chmod,e.exports.copyFile=r.copyFile,e.exports.lstat=r.lstat,e.exports.mkdir=r.mkdir,e.exports.readdir=r.readdir,e.exports.readlink=r.readlink,e.exports.rename=r.rename,e.exports.rmdir=r.rmdir,e.exports.stat=r.stat,e.exports.symlink=r.symlink,e.exports.unlink=r.unlink,e.exports.IS_WINDOWS="win32"===process.platform,e.exports.exists=function(t){return i(this,void 0,void 0,(function*(){try{yield e.exports.stat(t)}catch(e){if("ENOENT"===e.code)return!1;throw e}return!0}))},e.exports.isDirectory=function(t,r=!1){return i(this,void 0,void 0,(function*(){return(r?yield e.exports.stat(t):yield e.exports.lstat(t)).isDirectory()}))},e.exports.isRooted=function(t){if(!(t=function(t){if(t=t||"",e.exports.IS_WINDOWS)return(t=t.replace(/\//g,"\\")).replace(/\\\\+/g,"\\");return t.replace(/\/\/+/g,"/")}(t)))throw new Error('isRooted() parameter "p" cannot be empty');return e.exports.IS_WINDOWS?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/")},e.exports.tryGetExecutablePath=function(t,r){return i(this,void 0,void 0,(function*(){let o;try{o=yield e.exports.stat(t)}catch(e){"ENOENT"!==e.code&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${e}`)}if(o&&o.isFile())if(e.exports.IS_WINDOWS){const e=l.extname(t).toUpperCase();if(r.some((t=>t.toUpperCase()===e)))return t}else if(d(o))return t;const n=t;for(const s of r){t=n+s,o=void 0;try{o=yield e.exports.stat(t)}catch(e){"ENOENT"!==e.code&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${e}`)}if(o&&o.isFile()){if(e.exports.IS_WINDOWS){try{const r=l.dirname(t),o=l.basename(t).toUpperCase();for(const n of yield e.exports.readdir(r))if(o===n.toUpperCase()){t=l.join(r,n);break}}catch(e){console.log(`Unexpected error attempting to determine the actual case of the file '${t}': ${e}`)}return t}if(d(o))return t}}return""}))},e.exports.getCmdPath=function(){var e;return null!==(e=process.env.COMSPEC)&&void 0!==e?e:"cmd.exe"}}));var v={},y=v&&v.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),w=v&&v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),x=v&&v.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&y(t,e,r);return w(t,e),t},_=v&&v.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(v,"__esModule",{value:!0}),v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var b={},O=b&&b.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),E=b&&b.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),S=b&&b.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&O(t,e,r);return E(t,e),t};Object.defineProperty(b,"__esModule",{value:!0}),b.issue=b.issueCommand=void 0;const C=S(i);var P={};function k(e,t,r){const o=new T(e,t,r);process.stdout.write(o.toString()+C.EOL)}Object.defineProperty(P,"__esModule",{value:!0}),P.toCommandProperties=P.toCommandValue=void 0,P.toCommandValue=function(e){return null==e?"":"string"==typeof e||e instanceof String?e:JSON.stringify(e)},P.toCommandProperties=function(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}},b.issueCommand=k,b.issue=function(e,t=""){k(e,{},t)};class T{constructor(e,t,r){e||(e="missing.command"),this.command=e,this.properties=t,this.message=r}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(const o in this.properties)if(this.properties.hasOwnProperty(o)){const n=this.properties[o];n&&(r?r=!1:e+=",",e+=`${o}=${t=n,P.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var t;return e+=`::${function(e){return P.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}var A={},R=A&&A.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),q=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),D=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&R(t,e,r);return q(t,e),t};Object.defineProperty(A,"__esModule",{value:!0}),A.issueCommand=void 0;const N=D(u),j=D(i);A.issueCommand=function(e,t){const r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!N.existsSync(r))throw new Error(`Missing file at path: ${r}`);N.appendFileSync(r,`${P.toCommandValue(t)}${j.EOL}`,{encoding:"utf8"})};const $=x(i),I=x(c);var U={},H=U&&U.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(U,"__esModule",{value:!0}),U.OidcClient=void 0;var M={};Object.defineProperty(M,"__esModule",{value:!0});var B={};function F(e){if(!e.hostname)return!1;let t,r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;e.port?t=Number(e.port):"http:"===e.protocol?t=80:"https:"===e.protocol&&(t=443);let o=[e.hostname.toUpperCase()];"number"==typeof t&&o.push(`${o[0]}:${t}`);for(let e of r.split(",").map((e=>e.trim().toUpperCase())).filter((e=>e)))if(o.some((t=>t===e)))return!0;return!1}let L;var W,z,G,V,J;Object.defineProperty(B,"__esModule",{value:!0}),B.getProxyUrl=function(e){let t,r,o="https:"===e.protocol;return F(e)||(r=o?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY,r&&(t=new URL(r))),t},B.checkBypass=F,(z=W=M.HttpCodes||(M.HttpCodes={}))[z.OK=200]="OK",z[z.MultipleChoices=300]="MultipleChoices",z[z.MovedPermanently=301]="MovedPermanently",z[z.ResourceMoved=302]="ResourceMoved",z[z.SeeOther=303]="SeeOther",z[z.NotModified=304]="NotModified",z[z.UseProxy=305]="UseProxy",z[z.SwitchProxy=306]="SwitchProxy",z[z.TemporaryRedirect=307]="TemporaryRedirect",z[z.PermanentRedirect=308]="PermanentRedirect",z[z.BadRequest=400]="BadRequest",z[z.Unauthorized=401]="Unauthorized",z[z.PaymentRequired=402]="PaymentRequired",z[z.Forbidden=403]="Forbidden",z[z.NotFound=404]="NotFound",z[z.MethodNotAllowed=405]="MethodNotAllowed",z[z.NotAcceptable=406]="NotAcceptable",z[z.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",z[z.RequestTimeout=408]="RequestTimeout",z[z.Conflict=409]="Conflict",z[z.Gone=410]="Gone",z[z.TooManyRequests=429]="TooManyRequests",z[z.InternalServerError=500]="InternalServerError",z[z.NotImplemented=501]="NotImplemented",z[z.BadGateway=502]="BadGateway",z[z.ServiceUnavailable=503]="ServiceUnavailable",z[z.GatewayTimeout=504]="GatewayTimeout",(V=G=M.Headers||(M.Headers={})).Accept="accept",V.ContentType="content-type",(J=M.MediaTypes||(M.MediaTypes={})).ApplicationJson="application/json",M.getProxyUrl=function(e){let t=B.getProxyUrl(new URL(e));return t?t.href:""};const Q=[W.MovedPermanently,W.ResourceMoved,W.SeeOther,W.TemporaryRedirect,W.PermanentRedirect],K=[W.BadGateway,W.ServiceUnavailable,W.GatewayTimeout],X=["OPTIONS","GET","DELETE","HEAD"];class Y extends Error{constructor(e,t){super(e),this.name="HttpClientError",this.statusCode=t,Object.setPrototypeOf(this,Y.prototype)}}M.HttpClientError=Y;class Z{constructor(e){this.message=e}readBody(){return new Promise((async(e,t)=>{let r=Buffer.alloc(0);this.message.on("data",(e=>{r=Buffer.concat([r,e])})),this.message.on("end",(()=>{e(r.toString())}))}))}}M.HttpClientResponse=Z,M.isHttps=function(e){return"https:"===new URL(e).protocol};class ee{constructor(e,t,r){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[],this.requestOptions=r,r&&(null!=r.ignoreSslError&&(this._ignoreSslError=r.ignoreSslError),this._socketTimeout=r.socketTimeout,null!=r.allowRedirects&&(this._allowRedirects=r.allowRedirects),null!=r.allowRedirectDowngrade&&(this._allowRedirectDowngrade=r.allowRedirectDowngrade),null!=r.maxRedirects&&(this._maxRedirects=Math.max(r.maxRedirects,0)),null!=r.keepAlive&&(this._keepAlive=r.keepAlive),null!=r.allowRetries&&(this._allowRetries=r.allowRetries),null!=r.maxRetries&&(this._maxRetries=r.maxRetries))}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,r){return this.request("POST",e,t,r||{})}patch(e,t,r){return this.request("PATCH",e,t,r||{})}put(e,t,r){return this.request("PUT",e,t,r||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,r,o){return this.request(e,t,r,o)}async getJson(e,t={}){t[G.Accept]=this._getExistingOrDefaultHeader(t,G.Accept,J.ApplicationJson);let r=await this.get(e,t);return this._processResponse(r,this.requestOptions)}async postJson(e,t,r={}){let o=JSON.stringify(t,null,2);r[G.Accept]=this._getExistingOrDefaultHeader(r,G.Accept,J.ApplicationJson),r[G.ContentType]=this._getExistingOrDefaultHeader(r,G.ContentType,J.ApplicationJson);let n=await this.post(e,o,r);return this._processResponse(n,this.requestOptions)}async putJson(e,t,r={}){let o=JSON.stringify(t,null,2);r[G.Accept]=this._getExistingOrDefaultHeader(r,G.Accept,J.ApplicationJson),r[G.ContentType]=this._getExistingOrDefaultHeader(r,G.ContentType,J.ApplicationJson);let n=await this.put(e,o,r);return this._processResponse(n,this.requestOptions)}async patchJson(e,t,r={}){let o=JSON.stringify(t,null,2);r[G.Accept]=this._getExistingOrDefaultHeader(r,G.Accept,J.ApplicationJson),r[G.ContentType]=this._getExistingOrDefaultHeader(r,G.ContentType,J.ApplicationJson);let n=await this.patch(e,o,r);return this._processResponse(n,this.requestOptions)}async request(e,t,r,o){if(this._disposed)throw new Error("Client has already been disposed.");let n,s=new URL(t),i=this._prepareRequest(e,s,o),a=this._allowRetries&&-1!=X.indexOf(e)?this._maxRetries+1:1,c=0;for(;c<a;){if(n=await this.requestRaw(i,r),n&&n.message&&n.message.statusCode===W.Unauthorized){let e;for(let t=0;t<this.handlers.length;t++)if(this.handlers[t].canHandleAuthentication(n)){e=this.handlers[t];break}return e?e.handleAuthentication(this,i,r):n}let t=this._maxRedirects;for(;-1!=Q.indexOf(n.message.statusCode)&&this._allowRedirects&&t>0;){const a=n.message.headers.location;if(!a)break;let c=new URL(a);if("https:"==s.protocol&&s.protocol!=c.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await n.readBody(),c.hostname!==s.hostname)for(let e in o)"authorization"===e.toLowerCase()&&delete o[e];i=this._prepareRequest(e,c,o),n=await this.requestRaw(i,r),t--}if(-1==K.indexOf(n.message.statusCode))return n;c+=1,c<a&&(await n.readBody(),await this._performExponentialBackoff(c))}return n}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return new Promise(((r,o)=>{this.requestRawWithCallback(e,t,(function(e,t){e&&o(e),r(t)}))}))}requestRawWithCallback(e,t,r){let o;"string"==typeof t&&(e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let n=!1,s=(e,t)=>{n||(n=!0,r(e,t))},i=e.httpModule.request(e.options,(e=>{let t=new Z(e);s(null,t)}));i.on("socket",(e=>{o=e})),i.setTimeout(this._socketTimeout||18e4,(()=>{o&&o.end(),s(new Error("Request timeout: "+e.options.path),null)})),i.on("error",(function(e){s(e,null)})),t&&"string"==typeof t&&i.write(t,"utf8"),t&&"string"!=typeof t?(t.on("close",(function(){i.end()})),t.pipe(i)):i.end()}getAgent(e){let t=new URL(e);return this._getAgent(t)}_prepareRequest(e,o,n){const s={};s.parsedUrl=o;const i="https:"===s.parsedUrl.protocol;s.httpModule=i?r:t;const a=i?443:80;return s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):a,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=e,s.options.headers=this._mergeHeaders(n),null!=this.userAgent&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers&&this.handlers.forEach((e=>{e.prepareRequest(s.options)})),s}_mergeHeaders(e){const t=e=>Object.keys(e).reduce(((t,r)=>(t[r.toLowerCase()]=e[r],t)),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},t(this.requestOptions.headers),t(e)):t(e||{})}_getExistingOrDefaultHeader(e,t,r){let o;var n;return this.requestOptions&&this.requestOptions.headers&&(o=(n=this.requestOptions.headers,Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=n[t],e)),{}))[t]),e[t]||o||r}_getAgent(e){let o,n=B.getProxyUrl(e),s=n&&n.hostname;if(this._keepAlive&&s&&(o=this._proxyAgent),this._keepAlive&&!s&&(o=this._agent),o)return o;const i="https:"===e.protocol;let a=100;if(this.requestOptions&&(a=this.requestOptions.maxSockets||t.globalAgent.maxSockets),s){L||(L=g("jtjry"));const e={maxSockets:a,keepAlive:this._keepAlive,proxy:{...(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`},host:n.hostname,port:n.port}};let t;const r="https:"===n.protocol;t=i?r?L.httpsOverHttps:L.httpsOverHttp:r?L.httpOverHttps:L.httpOverHttp,o=t(e),this._proxyAgent=o}if(this._keepAlive&&!o){const e={keepAlive:this._keepAlive,maxSockets:a};o=i?new r.Agent(e):new t.Agent(e),this._agent=o}return o||(o=i?r.globalAgent:t.globalAgent),i&&this._ignoreSslError&&(o.options=Object.assign(o.options||{},{rejectUnauthorized:!1})),o}_performExponentialBackoff(e){e=Math.min(10,e);const t=5*Math.pow(2,e);return new Promise((e=>setTimeout((()=>e()),t)))}static dateTimeDeserializer(e,t){if("string"==typeof t){let e=new Date(t);if(!isNaN(e.valueOf()))return e}return t}async _processResponse(e,t){return new Promise((async(r,o)=>{const n=e.message.statusCode,s={statusCode:n,result:null,headers:{}};let i,a;n==W.NotFound&&r(s);try{a=await e.readBody(),a&&a.length>0&&(i=t&&t.deserializeDates?JSON.parse(a,ee.dateTimeDeserializer):JSON.parse(a),s.result=i),s.headers=e.message.headers}catch(e){}if(n>299){let e;e=i&&i.message?i.message:a&&a.length>0?a:"Failed request: ("+n+")";let t=new Y(e,n);t.result=s.result,o(t)}else r(s)}))}}M.HttpClient=ee;var te,re,oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.BasicCredentialHandler=class{constructor(e,t){this.username=e,this.password=t}prepareRequest(e){e.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(e){return!1}handleAuthentication(e,t,r){return null}};oe.BearerCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){e.headers.Authorization="Bearer "+this.token}canHandleAuthentication(e){return!1}handleAuthentication(e,t,r){return null}};oe.PersonalAccessTokenCredentialHandler=class{constructor(e){this.token=e}prepareRequest(e){e.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(e){return!1}handleAuthentication(e,t,r){return null}};class ne{static createHttpClient(e=!0,t=10){const r={allowRetries:e,maxRetries:t};return new M.HttpClient("actions/oidc-client",[new oe.BearerCredentialHandler(ne.getRequestToken())],r)}static getRequestToken(){const e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){const e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var t;return H(this,void 0,void 0,(function*(){const r=ne.createHttpClient(),o=yield r.getJson(e).catch((e=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${e.statusCode}\n \n        Error Message: ${e.result.message}`)})),n=null===(t=o.result)||void 0===t?void 0:t.value;if(!n)throw new Error("Response json body do not have ID Token field");return n}))}static getIDToken(e){return H(this,void 0,void 0,(function*(){try{let t=ne.getIDTokenUrl();if(e){t=`${t}&audience=${encodeURIComponent(e)}`}v.debug(`ID token url is ${t}`);const r=yield ne.getCall(t);return v.setSecret(r),r}catch(e){throw new Error(`Error message: ${e.message}`)}}))}}function se(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&!1===t.trimWhitespace?r:r.trim()}function ie(e,t={}){b.issueCommand("error",P.toCommandProperties(t),e instanceof Error?e.toString():e)}function ae(e){b.issue("group",e)}function ce(){b.issue("endgroup")}U.OidcClient=ne,(re=te=v.ExitCode||(v.ExitCode={}))[re.Success=0]="Success",re[re.Failure=1]="Failure",v.exportVariable=function(e,t){const r=P.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){const t="_GitHubActionsFileCommandDelimeter_",o=`${e}<<${t}${$.EOL}${r}${$.EOL}${t}`;A.issueCommand("ENV",o)}else b.issueCommand("set-env",{name:e},r)},v.setSecret=function(e){b.issueCommand("add-mask",{},e)},v.addPath=function(e){process.env.GITHUB_PATH||""?A.issueCommand("PATH",e):b.issueCommand("add-path",{},e),process.env.PATH=`${e}${I.delimiter}${process.env.PATH}`},v.getInput=se,v.getMultilineInput=function(e,t){return se(e,t).split("\n").filter((e=>""!==e))},v.getBooleanInput=function(e,t){const r=se(e,t);if(["true","True","TRUE"].includes(r))return!0;if(["false","False","FALSE"].includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\nSupport boolean input list: \`true | True | TRUE | false | False | FALSE\``)},v.setOutput=function(e,t){process.stdout.write($.EOL),b.issueCommand("set-output",{name:e},t)},v.setCommandEcho=function(e){b.issue("echo",e?"on":"off")},v.setFailed=function(e){process.exitCode=te.Failure,ie(e)},v.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},v.debug=function(e){b.issueCommand("debug",{},e)},v.error=ie,v.warning=function(e,t={}){b.issueCommand("warning",P.toCommandProperties(t),e instanceof Error?e.toString():e)},v.notice=function(e,t={}){b.issueCommand("notice",P.toCommandProperties(t),e instanceof Error?e.toString():e)},v.info=function(e){process.stdout.write(e+$.EOL)},v.startGroup=ae,v.endGroup=ce,v.group=function(e,t){return _(this,void 0,void 0,(function*(){let r;ae(e);try{r=yield t()}finally{ce()}return r}))},v.saveState=function(e,t){b.issueCommand("save-state",{name:e},t)},v.getState=function(e){return process.env[`STATE_${e}`]||""},v.getIDToken=function(e){return _(this,void 0,void 0,(function*(){return yield U.OidcClient.getIDToken(e)}))};var le={},ue=le&&le.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),de=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pe=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&ue(t,e,r);return de(t,e),t},he=le&&le.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(le,"__esModule",{value:!0}),le.getExecOutput=le.exec=void 0;const fe=pe(g("4zSgd"));function me(e,t,r){return he(this,void 0,void 0,(function*(){const o=fe.argStringToArray(e);if(0===o.length)throw new Error("Parameter 'commandLine' cannot be null or empty.");const n=o[0];t=o.slice(1).concat(t||[]);return new fe.ToolRunner(n,t,r).exec()}))}le.exec=me,le.getExecOutput=function(e,t,r){var o,n;return he(this,void 0,void 0,(function*(){let s="",i="";const a=new d.StringDecoder("utf8"),c=new d.StringDecoder("utf8"),l=null===(o=null==r?void 0:r.listeners)||void 0===o?void 0:o.stdout,u=null===(n=null==r?void 0:r.listeners)||void 0===n?void 0:n.stderr,p=Object.assign(Object.assign({},null==r?void 0:r.listeners),{stdout:e=>{s+=a.write(e),l&&l(e)},stderr:e=>{i+=c.write(e),u&&u(e)}}),h=yield me(e,t,Object.assign(Object.assign({},r),{listeners:p}));return s+=a.end(),i+=c.end(),{exitCode:h,stdout:s,stderr:i}}))},async function(){const e=v.getInput("implementation",{required:!0});v.getInput("version"),v.getInput("option");if("darwin"===process.platform)switch(e){case"chez":await le.exec("brew install chezscheme");break;case"gambit":await le.exec("brew install gambit-scheme");const e=await le.getExecOutput("find /usr/local/Cellar/gambit-scheme -type l -name current"),t=(e.stdout||e.stderr).trim();v.addPath(`${t}/bin`);break;case"gerbil":await le.exec("brew install gerbil-scheme"),v.addPath("/usr/local/opt/gerbil-scheme/libexec/bin"),v.exportVariable("GERBIL_HOME","/usr/local/opt/gerbil-scheme/libexec");break;case"mit":await le.exec("brew install mit-scheme");break;case"racket":await le.exec("brew install minimal-racket");break;case"guile":await le.exec("brew install guile");break;case"chicken":await le.exec("brew install chicken")}else if("linux"===process.platform)switch(e){case"chez":await le.exec("sudo apt install chezscheme");break;case"gambit":await le.exec("sudo apt install gambc");break;case"mit":await le.exec("sudo apt install mit-scheme");break;case"racket":await le.exec("sudo apt install racket");break;case"guile":await le.exec("sudo apt install guile-2.2");break;case"chicken":await le.exec("sudo apt install chicken-bin")}else if("win32"===process.platform)switch(e){case"chez":for(await le.exec("curl -LO https://github.com/cisco/ChezScheme/releases/download/v9.5.6/ChezScheme9.5.6.exe"),await le.exec("./ChezScheme9.5.6.exe",["-silent"]);!u.existsSync("C:/Program Files (x86)/Chez Scheme 9.5.6/bin/ti3nt/scheme.exe");)await new Promise((e=>setTimeout(e,1e3)));v.addPath("C:/Program Files (x86)/Chez Scheme 9.5.6/bin/ti3nt/"),u.copyFileSync("C:/Program Files (x86)/Chez Scheme 9.5.6/bin/ti3nt/scheme.exe","C:/Program Files (x86)/Chez Scheme 9.5.6/bin/ti3nt/chez.exe");break;case"gambit":await le.exec("choco install gambit");break;case"racket":await le.exec("choco install racket"),v.addPath("C:/Program Files/Racket");break;case"chicken":await le.exec("choco install chicken"),v.addPath("C:/tools/chicken/bin")}}().catch((e=>{v.setFailed(e.message)}));
//# sourceMappingURL=install.js.map
